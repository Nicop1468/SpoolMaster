"use client"; import { useState, useEffect } from "react"; export default function Page() { const [spools, setSpools] = useState([]); useEffect(() => { fetch("/api/spools").then(res => res.json()).then(data => setSpools(data)); }, []); const getUrgency = (s) => s.isHumid ? 100 : (!s.lastDried ? 90 : 30); return ( <main className="p-8 max-w-5xl mx-auto"> <h1 className="text-4xl font-black italic mb-10 tracking-tighter uppercase">Besoin de Sechage</h1> <div className="space-y-4"> {spools.sort((a,b) => getUrgency(b) - getUrgency(a)).map(s => ( <div key={s.id} className="bg-white p-6 rounded-[2rem] border border-white shadow-sm flex items-center gap-6"> <div className="w-12 h-12 rounded-2xl" style={{ backgroundColor: s.colorCode }} /> <div className="flex-1"> <div className="flex justify-between mb-2 text-[10px] font-black uppercase"> <span>{s.brand}</span> <span className="text-orange-500">{getUrgency(s)}% Priorite</span> </div> <div className="w-full bg-slate-100 h-2 rounded-full overflow-hidden"> <div className="bg-orange-500 h-full" style={{ width: getUrgency(s) + "%" }} /> </div> </div> </div> ))} </div> </main> ); }